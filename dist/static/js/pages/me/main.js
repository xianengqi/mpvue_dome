global.webpackJsonp([1],{AbCC:function(e,t,n){"use strict";t.a={methods:{isLeapYear:function(){var e=(new Date).getFullYear();return e%400==0||e%4==0&&e%100!=0},getDayOfYear:function(){return this.isLeapYear()?366:365}},computed:{year:function(){return(new Date).getFullYear()},days:function(){var e=new Date;e.setMonth(0),e.setDate(1);var t=(new Date).getTime()-e.getTime();return parseInt(t/1e3/60/60/24)+1},percent:function(){return(100*this.days/this.getDayOfYear()).toFixed(1)}}}},F3Pe:function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"userinfo",attrs:{eventid:"0"},on:{click:e.login}},[n("img",{attrs:{src:e.userinfo.avatarUrl,alt:""}}),e._v(" "),n("p",[e._v(e._s(e.userinfo.nickName))])],1),e._v(" "),n("YearProgress",{attrs:{mpcomid:"0"}}),e._v(" "),e.userinfo.openId?n("button",{staticClass:"btn",attrs:{eventid:"1"},on:{click:e.scanBook}},[e._v("添加图书")]):e._e()],1)},staticRenderFns:[]};t.a=r},FV2Z:function(e,t,n){"use strict";var r=n("Xxa5"),a=n.n(r),s=n("exGp"),i=n.n(s),o=n("4pYg"),c=n.n(o),u=n("H0q+"),f=n("rQBB"),l=n("QmSG");t.a={components:{YearProgress:u.a},data:function(){return{userinfo:{avatarUrl:"../../../static/img/unlogin.png",nickName:"点击登录"}}},methods:{addBook:function(e){var t=this;return i()(a.a.mark(function n(){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,Object(f.b)("/weapp/addbook",{isbn:e,openid:t.userinfo.openId});case 3:r=n.sent,Object(f.c)("添加成功",r.title+"添加成功");case 5:case"end":return n.stop()}},n,t)}))()},scanBook:function(){var e=this;wx.scanCode({success:function(t){t.result&&e.addBook(t.result)}})},login:function(){var e=this;wx.getStorageSync("userinfo")||(c.a.setLoginUrl(l.a.loginUrl),c.a.login({success:function(t){c.a.request({url:l.a.userUrl,login:!0,success:function(t){Object(f.d)("登录成功"),wx.setStorageSync("userinfo",t.data.data),e.userinfo=t.data.data}})}}))}},onShow:function(){var e=wx.getStorageSync("userinfo");e&&(this.userinfo=e)}}},"H0q+":function(e,t,n){"use strict";var r=n("AbCC"),a=n("tGMz");var s=function(e){n("p3J1")},i=n("ybqe")(r.a,a.a,s,null,null);t.a=i.exports},"O/I1":function(e,t){},SijM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("5nAL"),a=n.n(r),s=n("rc9n");new a.a(s.a).$mount()},p3J1:function(e,t){},rc9n:function(e,t,n){"use strict";var r=n("FV2Z"),a=n("F3Pe");var s=function(e){n("O/I1")},i=n("ybqe")(r.a,a.a,s,null,null);t.a=i.exports},tGMz:function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"progressbar"},[n("progress",{attrs:{percent:e.percent,activeColor:"#EA5A49"}}),e._v(" "),n("p",[e._v(e._s(e.year)+"已经过去了"+e._s(e.days)+"天， "+e._s(e.percent)+"%")])],1)},staticRenderFns:[]};t.a=r}},["SijM"]);